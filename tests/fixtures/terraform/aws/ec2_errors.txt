# AWS EC2 Errors - Comprehensive Test Fixtures
# Real-world EC2 instance and related resource errors

# ============================================================================
# Test Case 1: Insufficient Instance Capacity
# ============================================================================

Terraform will perform the following actions:

  # aws_instance.ml_training will be created

Plan: 1 to add, 0 to change, 0 to destroy.

aws_instance.ml_training: Creating...

│ Error: creating EC2 Instance: InsufficientInstanceCapacity:
│ We currently do not have sufficient p4d.24xlarge capacity in the
│ Availability Zone you requested (us-east-1a). Our system will be
│ working on provisioning additional capacity. You can currently get
│ p4d.24xlarge capacity by not specifying an Availability Zone in
│ your request or choosing us-east-1b, us-east-1c.
│
│   with aws_instance.ml_training,
│   on compute/ml.tf line 1, in resource "aws_instance" "ml_training":
│    1: resource "aws_instance" "ml_training" {

---FIXTURE_SEPARATOR---

# ============================================================================
# Test Case 2: Invalid AMI ID
# ============================================================================

Terraform will perform the following actions:

  # aws_instance.web will be created

Plan: 1 to add, 0 to change, 0 to destroy.

aws_instance.web: Creating...

│ Error: creating EC2 Instance: InvalidAMIID.NotFound:
│ The image id '[ami-0123456789abcdef0]' does not exist
│
│   with aws_instance.web,
│   on compute/main.tf line 15, in resource "aws_instance" "web":
│   15: resource "aws_instance" "web" {

---FIXTURE_SEPARATOR---

# ============================================================================
# Test Case 3: VPC Subnet Exhaustion
# ============================================================================

Terraform will perform the following actions:

  # aws_instance.api[9] will be created
  # aws_instance.api[10] will be created

Plan: 2 to add, 0 to change, 0 to destroy.

aws_instance.api[9]: Creating...
aws_instance.api[10]: Creating...
aws_instance.api[9]: Creation complete after 45s [id=i-0abc123def456789a]
aws_instance.api[10]: Still creating... [1m0s elapsed]

│ Error: creating EC2 Instance: InvalidParameterValue:
│ You have exceeded the number of private IPv4 addresses
│ available in subnet-0abc123def456789b. You can request
│ additional addresses from Amazon, or use IPAM to manage your addresses.
│
│   with aws_instance.api[10],
│   on compute/main.tf line 35, in resource "aws_instance" "api":
│   35: resource "aws_instance" "api" {

---FIXTURE_SEPARATOR---

# ============================================================================
# Test Case 4: Security Group Rule Limit
# ============================================================================

Terraform will perform the following actions:

  # aws_security_group_rule.ingress[51] will be created

Plan: 1 to add, 0 to change, 0 to destroy.

aws_security_group_rule.ingress[51]: Creating...

│ Error: creating Security Group Rule: RulesPerSecurityGroupLimitExceeded:
│ The maximum number of rules per security group has been reached.
│
│   with aws_security_group_rule.ingress[51],
│   on network/security.tf line 78, in resource "aws_security_group_rule" "ingress":
│   78: resource "aws_security_group_rule" "ingress" {

---FIXTURE_SEPARATOR---

# ============================================================================
# Test Case 5: EBS Volume Limit Exceeded
# ============================================================================

Terraform will perform the following actions:

  # aws_ebs_volume.data[25] will be created

Plan: 1 to add, 0 to change, 0 to destroy.

aws_ebs_volume.data[25]: Creating...

│ Error: creating EBS Volume: VolumeLimitExceeded:
│ You have exceeded your maximum gp3 storage limit of 50 TiB in this region.
│ Please contact AWS Support to request an increase to your storage limit.
│
│   with aws_ebs_volume.data[25],
│   on storage/ebs.tf line 15, in resource "aws_ebs_volume" "data":
│   15: resource "aws_ebs_volume" "data" {

---FIXTURE_SEPARATOR---

# ============================================================================
# Test Case 6: Launch Template Invalid Configuration
# ============================================================================

Terraform will perform the following actions:

  # aws_launch_template.app will be updated in-place

Plan: 0 to add, 1 to change, 0 to destroy.

aws_launch_template.app: Modifying...

│ Error: updating EC2 Launch Template (lt-0abc123def456789c): InvalidParameterCombination:
│ The parameter instanceType and instanceRequirements cannot be specified together.
│
│   with aws_launch_template.app,
│   on compute/asg.tf line 1, in resource "aws_launch_template" "app":
│    1: resource "aws_launch_template" "app" {

---FIXTURE_SEPARATOR---

# ============================================================================
# Test Case 7: Spot Instance Max Price Too Low
# ============================================================================

Terraform will perform the following actions:

  # aws_spot_instance_request.batch will be created

Plan: 1 to add, 0 to change, 0 to destroy.

aws_spot_instance_request.batch: Creating...

│ Error: creating EC2 Spot Instance Request: MaxSpotInstanceCountExceeded:
│ Max spot instance count exceeded
│
│   with aws_spot_instance_request.batch,
│   on compute/spot.tf line 1, in resource "aws_spot_instance_request" "batch":
│    1: resource "aws_spot_instance_request" "batch" {

---FIXTURE_SEPARATOR---

# ============================================================================
# Test Case 8: EIP Association Failure
# ============================================================================

Terraform will perform the following actions:

  # aws_eip_association.nat will be created

Plan: 1 to add, 0 to change, 0 to destroy.

aws_eip_association.nat: Creating...

│ Error: associating EIP (eipalloc-0abc123def456789d) with instance (i-0def456789abc0123):
│ Resource.AlreadyAssociated: resource eipalloc-0abc123def456789d is already associated
│ with associate-id eipassoc-0xyz789abc123def4
│
│   with aws_eip_association.nat,
│   on network/nat.tf line 25, in resource "aws_eip_association" "nat":
│   25: resource "aws_eip_association" "nat" {
