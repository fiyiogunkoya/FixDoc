# AWS Multi-Error Complex Scenario - Comprehensive Test Fixtures
# Real-world scenarios with multiple simultaneous errors

# ============================================================================
# Test Case 1: Full Stack Deployment Failure (5 errors)
# ============================================================================

Terraform will perform the following actions:

  # module.app.aws_lb.main will be created
  # module.app.aws_lb_target_group.api will be created
  # module.app.aws_lb_listener.https will be created
  # module.app.aws_ecs_cluster.main will be created
  # module.app.aws_ecs_service.api will be created
  # module.app.aws_ecs_task_definition.api will be created
  # module.database.aws_db_instance.main will be created
  # module.database.aws_db_subnet_group.main will be created
  # module.cache.aws_elasticache_cluster.main will be created

Plan: 9 to add, 0 to change, 0 to destroy.

module.database.aws_db_subnet_group.main: Creating...
module.app.aws_ecs_cluster.main: Creating...
module.app.aws_lb.main: Creating...
module.database.aws_db_subnet_group.main: Creation complete after 2s [id=prod-db-subnet-group]
module.app.aws_ecs_cluster.main: Creation complete after 8s [id=arn:aws:ecs:us-east-1:123456789012:cluster/prod-cluster]
module.database.aws_db_instance.main: Creating...
module.app.aws_lb.main: Still creating... [10s elapsed]
module.app.aws_lb.main: Still creating... [20s elapsed]

│ Error: creating ELBv2 Application Load Balancer (prod-api-alb):
│ InvalidSubnet: VPC vpc-0abc123def456789a has no internet gateway
│
│   with module.app.aws_lb.main,
│   on modules/app/alb.tf line 1, in resource "aws_lb" "main":
│    1: resource "aws_lb" "main" {

module.database.aws_db_instance.main: Still creating... [30s elapsed]
module.database.aws_db_instance.main: Still creating... [1m0s elapsed]

│ Error: creating RDS DB Instance (prod-postgres): InvalidParameterValue:
│ IAM Database Authentication is not supported for the engine postgres
│ with version 11.22. Upgrade to postgres version 12 or higher.
│
│   with module.database.aws_db_instance.main,
│   on modules/database/main.tf line 15, in resource "aws_db_instance" "main":
│   15: resource "aws_db_instance" "main" {

module.cache.aws_elasticache_cluster.main: Creating...

│ Error: creating ElastiCache Cache Cluster (prod-redis):
│ InvalidParameterValue: The parameter CacheNodeType is not a valid cache node type.
│ cache.t4g.micro is not supported for Redis. Use cache.t4g.small or larger.
│
│   with module.cache.aws_elasticache_cluster.main,
│   on modules/cache/main.tf line 1, in resource "aws_elasticache_cluster" "main":
│    1: resource "aws_elasticache_cluster" "main" {

module.app.aws_ecs_task_definition.api: Creating...

│ Error: creating ECS Task Definition (prod-api-task): ClientException:
│ Fargate requires task definition to have execution role ARN to support
│ ECR images or CloudWatch logging.
│
│   with module.app.aws_ecs_task_definition.api,
│   on modules/app/ecs.tf line 25, in resource "aws_ecs_task_definition" "api":
│   25: resource "aws_ecs_task_definition" "api" {

module.app.aws_ecs_service.api: Creating...

│ Error: creating ECS Service (prod-api-service):
│ InvalidParameterException: Unable to assume the service linked role.
│ Please verify that the ECS service linked role exists.
│
│   with module.app.aws_ecs_service.api,
│   on modules/app/ecs.tf line 58, in resource "aws_ecs_service" "api":
│   58: resource "aws_ecs_service" "api" {

---FIXTURE_SEPARATOR---

# ============================================================================
# Test Case 2: Microservices Deployment (3 service failures)
# ============================================================================

Terraform will perform the following actions:

  # aws_lambda_function.auth_service will be created
  # aws_lambda_function.payment_service will be created
  # aws_lambda_function.notification_service will be created
  # aws_api_gateway_rest_api.main will be created

Plan: 4 to add, 0 to change, 0 to destroy.

aws_api_gateway_rest_api.main: Creating...
aws_api_gateway_rest_api.main: Creation complete after 1s [id=abc123xyz]
aws_lambda_function.auth_service: Creating...
aws_lambda_function.payment_service: Creating...
aws_lambda_function.notification_service: Creating...

│ Error: creating Lambda Function (auth-service): InvalidParameterValueException:
│ The role defined for the function cannot be assumed by Lambda.
│
│   with aws_lambda_function.auth_service,
│   on services/auth.tf line 1, in resource "aws_lambda_function" "auth_service":
│    1: resource "aws_lambda_function" "auth_service" {

│ Error: creating Lambda Function (payment-service): ResourceConflictException:
│ Function already exist: payment-service
│
│   with aws_lambda_function.payment_service,
│   on services/payment.tf line 1, in resource "aws_lambda_function" "payment_service":
│    1: resource "aws_lambda_function" "payment_service" {

│ Error: creating Lambda Function (notification-service): InvalidParameterValueException:
│ Value nodejs14.x at 'runtime' failed to satisfy constraint: Member must satisfy
│ enum value set: [nodejs18.x, nodejs20.x, python3.9, python3.10, python3.11, python3.12]
│
│   with aws_lambda_function.notification_service,
│   on services/notification.tf line 1, in resource "aws_lambda_function" "notification_service":
│    1: resource "aws_lambda_function" "notification_service" {

---FIXTURE_SEPARATOR---

# ============================================================================
# Test Case 3: Network Infrastructure Failure (4 errors)
# ============================================================================

Terraform will perform the following actions:

  # aws_vpc.main will be created
  # aws_subnet.public[0] will be created
  # aws_subnet.public[1] will be created
  # aws_subnet.private[0] will be created
  # aws_subnet.private[1] will be created
  # aws_internet_gateway.main will be created
  # aws_nat_gateway.main[0] will be created
  # aws_nat_gateway.main[1] will be created

Plan: 8 to add, 0 to change, 0 to destroy.

aws_vpc.main: Creating...

│ Error: creating EC2 VPC: VpcLimitExceeded:
│ The maximum number of VPCs has been reached.
│
│   with aws_vpc.main,
│   on network/vpc.tf line 1, in resource "aws_vpc" "main":
│    1: resource "aws_vpc" "main" {

aws_subnet.public[0]: Creating...
aws_subnet.public[1]: Creating...

│ Error: creating EC2 Subnet: InvalidVpcID.NotFound:
│ The vpc ID 'vpc-0proposed123456789' does not exist
│
│   with aws_subnet.public[0],
│   on network/subnets.tf line 1, in resource "aws_subnet" "public":
│    1: resource "aws_subnet" "public" {

│ Error: creating EC2 Subnet: InvalidVpcID.NotFound:
│ The vpc ID 'vpc-0proposed123456789' does not exist
│
│   with aws_subnet.public[1],
│   on network/subnets.tf line 1, in resource "aws_subnet" "public":
│    1: resource "aws_subnet" "public" {

aws_internet_gateway.main: Creating...

│ Error: creating EC2 Internet Gateway: InternetGatewayLimitExceeded:
│ The maximum number of internet gateways has been reached.
│
│   with aws_internet_gateway.main,
│   on network/igw.tf line 1, in resource "aws_internet_gateway" "main":
│    1: resource "aws_internet_gateway" "main" {

---FIXTURE_SEPARATOR---

# ============================================================================
# Test Case 4: EKS Cluster Creation (Complex Dependencies)
# ============================================================================

Terraform will perform the following actions:

  # module.eks.aws_eks_cluster.main will be created
  # module.eks.aws_eks_node_group.workers will be created
  # module.eks.aws_iam_role.cluster will be created
  # module.eks.aws_iam_role.node_group will be created
  # module.eks.aws_cloudwatch_log_group.cluster will be created

Plan: 5 to add, 0 to change, 0 to destroy.

module.eks.aws_iam_role.cluster: Creating...
module.eks.aws_iam_role.node_group: Creating...
module.eks.aws_cloudwatch_log_group.cluster: Creating...
module.eks.aws_iam_role.cluster: Creation complete after 2s [id=prod-eks-cluster-role]
module.eks.aws_iam_role.node_group: Creation complete after 2s [id=prod-eks-node-role]
module.eks.aws_cloudwatch_log_group.cluster: Creation complete after 1s [id=/aws/eks/prod-cluster/cluster]
module.eks.aws_eks_cluster.main: Creating...
module.eks.aws_eks_cluster.main: Still creating... [10s elapsed]
module.eks.aws_eks_cluster.main: Still creating... [2m0s elapsed]

│ Error: creating EKS Cluster (prod-cluster): ResourceInUseException:
│ Cluster already exists with name: prod-cluster
│
│   with module.eks.aws_eks_cluster.main,
│   on modules/eks/cluster.tf line 1, in resource "aws_eks_cluster" "main":
│    1: resource "aws_eks_cluster" "main" {

module.eks.aws_eks_node_group.workers: Creating...

│ Error: creating EKS Node Group (prod-cluster:prod-workers): InvalidParameterException:
│ Cluster prod-cluster status is FAILED. Cluster must be in ACTIVE status.
│
│   with module.eks.aws_eks_node_group.workers,
│   on modules/eks/node_group.tf line 1, in resource "aws_eks_node_group" "workers":
│    1: resource "aws_eks_node_group" "workers" {
