# AWS VPC and Networking Errors - Comprehensive Test Fixtures
# Real-world VPC, subnet, and networking configuration errors

# ============================================================================
# Test Case 1: VPC CIDR Overlap
# ============================================================================

Terraform will perform the following actions:

  # aws_vpc.new will be created

Plan: 1 to add, 0 to change, 0 to destroy.

aws_vpc.new: Creating...

│ Error: creating EC2 VPC: InvalidVpc.Range:
│ The CIDR '10.0.0.0/16' conflicts with another subnet
│
│   with aws_vpc.new,
│   on network/vpc.tf line 1, in resource "aws_vpc" "new":
│    1: resource "aws_vpc" "new" {

---FIXTURE_SEPARATOR---

# ============================================================================
# Test Case 2: Subnet CIDR Outside VPC Range
# ============================================================================

Terraform will perform the following actions:

  # aws_subnet.public will be created

Plan: 1 to add, 0 to change, 0 to destroy.

aws_subnet.public: Creating...

│ Error: creating EC2 Subnet: InvalidSubnet.Range:
│ The CIDR '192.168.1.0/24' is outside of the CIDR range
│ of the VPC '10.0.0.0/16'
│
│   with aws_subnet.public,
│   on network/subnets.tf line 12, in resource "aws_subnet" "public":
│   12: resource "aws_subnet" "public" {

---FIXTURE_SEPARATOR---

# ============================================================================
# Test Case 3: NAT Gateway - No EIP
# ============================================================================

Terraform will perform the following actions:

  # aws_nat_gateway.main will be created

Plan: 1 to add, 0 to change, 0 to destroy.

aws_nat_gateway.main: Creating...

│ Error: creating EC2 NAT Gateway: InvalidAllocationID.NotFound:
│ The allocation ID 'eipalloc-0abc123def456789x' does not exist
│
│   with aws_nat_gateway.main,
│   on network/nat.tf line 1, in resource "aws_nat_gateway" "main":
│    1: resource "aws_nat_gateway" "main" {

---FIXTURE_SEPARATOR---

# ============================================================================
# Test Case 4: VPC Peering - Route Table Conflict
# ============================================================================

Terraform will perform the following actions:

  # aws_route.peering will be created

Plan: 1 to add, 0 to change, 0 to destroy.

aws_route.peering: Creating...

│ Error: creating EC2 Route: RouteAlreadyExists:
│ The route identified by 172.16.0.0/12 already exists.
│
│   with aws_route.peering,
│   on network/routes.tf line 45, in resource "aws_route" "peering":
│   45: resource "aws_route" "peering" {

---FIXTURE_SEPARATOR---

# ============================================================================
# Test Case 5: Transit Gateway Attachment - Subnet AZ Mismatch
# ============================================================================

Terraform will perform the following actions:

  # aws_ec2_transit_gateway_vpc_attachment.shared will be created

Plan: 1 to add, 0 to change, 0 to destroy.

aws_ec2_transit_gateway_vpc_attachment.shared: Creating...

│ Error: creating EC2 Transit Gateway VPC Attachment:
│ IncorrectState: Cannot create attachment. Subnet subnet-0abc123def456789a
│ and subnet subnet-0def456789abc0123 are in the same Availability Zone.
│ Select subnets in different Availability Zones.
│
│   with aws_ec2_transit_gateway_vpc_attachment.shared,
│   on network/tgw.tf line 22, in resource "aws_ec2_transit_gateway_vpc_attachment" "shared":
│   22: resource "aws_ec2_transit_gateway_vpc_attachment" "shared" {

---FIXTURE_SEPARATOR---

# ============================================================================
# Test Case 6: Network ACL Rule Number Conflict
# ============================================================================

Terraform will perform the following actions:

  # aws_network_acl_rule.allow_http will be created

Plan: 1 to add, 0 to change, 0 to destroy.

aws_network_acl_rule.allow_http: Creating...

│ Error: creating EC2 Network ACL Rule: NetworkAclEntryAlreadyExists:
│ The network acl entry identified by 100 already exists.
│
│   with aws_network_acl_rule.allow_http,
│   on network/nacl.tf line 15, in resource "aws_network_acl_rule" "allow_http":
│   15: resource "aws_network_acl_rule" "allow_http" {

---FIXTURE_SEPARATOR---

# ============================================================================
# Test Case 7: VPC Endpoint - Service Not Available
# ============================================================================

Terraform will perform the following actions:

  # aws_vpc_endpoint.bedrock will be created

Plan: 1 to add, 0 to change, 0 to destroy.

aws_vpc_endpoint.bedrock: Creating...

│ Error: creating EC2 VPC Endpoint: InvalidServiceName:
│ The Vpc Endpoint Service 'com.amazonaws.ap-south-1.bedrock-runtime'
│ does not exist
│
│   with aws_vpc_endpoint.bedrock,
│   on network/endpoints.tf line 35, in resource "aws_vpc_endpoint" "bedrock":
│   35: resource "aws_vpc_endpoint" "bedrock" {

---FIXTURE_SEPARATOR---

# ============================================================================
# Test Case 8: Internet Gateway Already Attached
# ============================================================================

Terraform will perform the following actions:

  # aws_internet_gateway_attachment.main will be created

Plan: 1 to add, 0 to change, 0 to destroy.

aws_internet_gateway_attachment.main: Creating...

│ Error: attaching EC2 Internet Gateway (igw-0abc123def456789a) to VPC (vpc-0xyz789abc123def4):
│ Resource.AlreadyAssociated: resource igw-0abc123def456789a is already attached to
│ network vpc-0abc123def456789b
│
│   with aws_internet_gateway_attachment.main,
│   on network/igw.tf line 12, in resource "aws_internet_gateway_attachment" "main":
│   12: resource "aws_internet_gateway_attachment" "main" {

---FIXTURE_SEPARATOR---

# ============================================================================
# Test Case 9: Load Balancer - Invalid Security Group
# ============================================================================

Terraform will perform the following actions:

  # aws_lb.app will be created

Plan: 1 to add, 0 to change, 0 to destroy.

aws_lb.app: Creating...

│ Error: creating ELBv2 Application Load Balancer (app-load-balancer):
│ InvalidConfigurationRequest: Security groups ['sg-0abc123def456789x']
│ are not valid for load balancer in VPC 'vpc-0xyz789abc123def4'.
│
│   with aws_lb.app,
│   on network/alb.tf line 1, in resource "aws_lb" "app":
│    1: resource "aws_lb" "app" {

---FIXTURE_SEPARATOR---

# ============================================================================
# Test Case 10: Route53 Private Zone - VPC Association
# ============================================================================

Terraform will perform the following actions:

  # aws_route53_zone_association.secondary will be created

Plan: 1 to add, 0 to change, 0 to destroy.

aws_route53_zone_association.secondary: Creating...

│ Error: associating Route53 Hosted Zone (Z1234567890ABC) with VPC (vpc-0def456789abc0123):
│ ConflictingDomainExists: The VPC vpc-0def456789abc0123 is already associated
│ with a hosted zone with the same domain name (internal.company.com).
│
│   with aws_route53_zone_association.secondary,
│   on network/dns.tf line 28, in resource "aws_route53_zone_association" "secondary":
│   28: resource "aws_route53_zone_association" "secondary" {
