# AWS Lambda Errors - Comprehensive Test Fixtures
# Real-world Lambda function creation and configuration errors

# ============================================================================
# Test Case 1: Code Package Too Large
# ============================================================================

Terraform will perform the following actions:

  # aws_lambda_function.data_processor will be created

Plan: 1 to add, 0 to change, 0 to destroy.

aws_lambda_function.data_processor: Creating...

│ Error: creating Lambda Function (data-processor): InvalidParameterValueException:
│ Unzipped size must be smaller than 262144000 bytes
│
│   with aws_lambda_function.data_processor,
│   on lambda/main.tf line 1, in resource "aws_lambda_function" "data_processor":
│    1: resource "aws_lambda_function" "data_processor" {

---FIXTURE_SEPARATOR---

# ============================================================================
# Test Case 2: Invalid Runtime
# ============================================================================

Terraform will perform the following actions:

  # aws_lambda_function.legacy will be created

Plan: 1 to add, 0 to change, 0 to destroy.

aws_lambda_function.legacy: Creating...

│ Error: creating Lambda Function (legacy-handler): InvalidParameterValueException:
│ Value python2.7 at 'runtime' failed to satisfy constraint: Member must satisfy
│ enum value set: [nodejs18.x, nodejs20.x, python3.9, python3.10, python3.11, python3.12,
│ java17, java21, dotnet6, dotnet8, ruby3.2, ruby3.3, provided.al2, provided.al2023]
│
│   with aws_lambda_function.legacy,
│   on lambda/legacy.tf line 1, in resource "aws_lambda_function" "legacy":
│    1: resource "aws_lambda_function" "legacy" {

---FIXTURE_SEPARATOR---

# ============================================================================
# Test Case 3: VPC Configuration Error
# ============================================================================

Terraform will perform the following actions:

  # aws_lambda_function.internal_api will be created

Plan: 1 to add, 0 to change, 0 to destroy.

aws_lambda_function.internal_api: Creating...

│ Error: creating Lambda Function (internal-api): InvalidParameterValueException:
│ The provided execution role does not have permissions to call
│ CreateNetworkInterface on EC2. Please check your execution role permissions
│ and try again.
│
│   with aws_lambda_function.internal_api,
│   on lambda/internal.tf line 12, in resource "aws_lambda_function" "internal_api":
│   12: resource "aws_lambda_function" "internal_api" {

---FIXTURE_SEPARATOR---

# ============================================================================
# Test Case 4: Reserved Concurrency Exceeds Account Limit
# ============================================================================

Terraform will perform the following actions:

  # aws_lambda_function.high_throughput will be updated in-place

Plan: 0 to add, 1 to change, 0 to destroy.

aws_lambda_function.high_throughput: Modifying...

│ Error: setting Lambda Function (high-throughput) concurrency:
│ InvalidParameterValueException: Specified ReservedConcurrentExecutions for
│ function decreases account's UnreservedConcurrentExecution below its minimum
│ value of [100].
│
│   with aws_lambda_function.high_throughput,
│   on lambda/high_throughput.tf line 1, in resource "aws_lambda_function" "high_throughput":
│    1: resource "aws_lambda_function" "high_throughput" {

---FIXTURE_SEPARATOR---

# ============================================================================
# Test Case 5: Layer Version Not Found
# ============================================================================

Terraform will perform the following actions:

  # aws_lambda_function.with_layers will be created

Plan: 1 to add, 0 to change, 0 to destroy.

aws_lambda_function.with_layers: Creating...

│ Error: creating Lambda Function (function-with-layers): InvalidParameterValueException:
│ Layer version arn:aws:lambda:us-east-1:123456789012:layer:my-custom-layer:99
│ does not exist.
│
│   with aws_lambda_function.with_layers,
│   on lambda/layers.tf line 8, in resource "aws_lambda_function" "with_layers":
│    8: resource "aws_lambda_function" "with_layers" {

---FIXTURE_SEPARATOR---

# ============================================================================
# Test Case 6: Event Source Mapping - Stream Not Found
# ============================================================================

Terraform will perform the following actions:

  # aws_lambda_event_source_mapping.kinesis will be created

Plan: 1 to add, 0 to change, 0 to destroy.

aws_lambda_event_source_mapping.kinesis: Creating...

│ Error: creating Lambda Event Source Mapping: InvalidParameterValueException:
│ The event source arn (arn:aws:kinesis:us-east-1:123456789012:stream/data-stream)
│ provided does not exist or you don't have access to it.
│
│   with aws_lambda_event_source_mapping.kinesis,
│   on lambda/triggers.tf line 15, in resource "aws_lambda_event_source_mapping" "kinesis":
│   15: resource "aws_lambda_event_source_mapping" "kinesis" {

---FIXTURE_SEPARATOR---

# ============================================================================
# Test Case 7: Function URL Auth Type Conflict
# ============================================================================

Terraform will perform the following actions:

  # aws_lambda_function_url.public will be created

Plan: 1 to add, 0 to change, 0 to destroy.

aws_lambda_function_url.public: Creating...

│ Error: creating Lambda Function URL (webhook-handler): InvalidParameterValueException:
│ AuthType must be AWS_IAM when using function URL with IAM authorization.
│ Use CORS configuration to control access for NONE auth type.
│
│   with aws_lambda_function_url.public,
│   on lambda/url.tf line 1, in resource "aws_lambda_function_url" "public":
│    1: resource "aws_lambda_function_url" "public" {

---FIXTURE_SEPARATOR---

# ============================================================================
# Test Case 8: Lambda@Edge - Invalid Handler
# ============================================================================

Terraform will perform the following actions:

  # aws_lambda_function.edge will be created

Plan: 1 to add, 0 to change, 0 to destroy.

aws_lambda_function.edge: Creating...

│ Error: creating Lambda Function (cloudfront-edge-handler):
│ InvalidParameterValueException: Lambda@Edge functions do not support
│ environment variables. Remove the environment configuration and try again.
│
│   with aws_lambda_function.edge,
│   on lambda/edge.tf line 1, in resource "aws_lambda_function" "edge":
│    1: resource "aws_lambda_function" "edge" {
