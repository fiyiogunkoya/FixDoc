# AWS S3 Errors - Comprehensive Test Fixtures
# Real-world S3 bucket creation and configuration errors

# ============================================================================
# Test Case 1: Bucket Already Exists (Globally)
# ============================================================================

Terraform will perform the following actions:

  # aws_s3_bucket.data will be created

Plan: 1 to add, 0 to change, 0 to destroy.

aws_s3_bucket.data: Creating...

│ Error: creating Amazon S3 (Simple Storage) Bucket (my-company-data-bucket):
│ operation error S3: CreateBucket, https response error StatusCode: 409,
│ RequestID: ABC123DEF456, HostID: xyz789,
│ api error BucketAlreadyExists: The requested bucket name is not available.
│ The bucket namespace is shared by all users of the system.
│ Please select a different name and try again.
│
│   with aws_s3_bucket.data,
│   on storage/main.tf line 1, in resource "aws_s3_bucket" "data":
│    1: resource "aws_s3_bucket" "data" {

---FIXTURE_SEPARATOR---

# ============================================================================
# Test Case 2: Invalid Bucket Name
# ============================================================================

Terraform will perform the following actions:

  # aws_s3_bucket.logs will be created

Plan: 1 to add, 0 to change, 0 to destroy.

aws_s3_bucket.logs: Creating...

│ Error: creating Amazon S3 (Simple Storage) Bucket (My_Invalid_Bucket_Name):
│ operation error S3: CreateBucket, https response error StatusCode: 400,
│ RequestID: GHIJ789KLM012, HostID: abc456,
│ api error InvalidBucketName: The specified bucket is not valid.
│
│   with aws_s3_bucket.logs,
│   on storage/main.tf line 15, in resource "aws_s3_bucket" "logs":
│   15: resource "aws_s3_bucket" "logs" {

---FIXTURE_SEPARATOR---

# ============================================================================
# Test Case 3: S3 ACL Conflict with Object Ownership
# ============================================================================

Terraform will perform the following actions:

  # aws_s3_bucket_acl.public_read will be created

Plan: 1 to add, 0 to change, 0 to destroy.

aws_s3_bucket_acl.public_read: Creating...

│ Error: creating S3 Bucket ACL (static-assets-bucket,private):
│ operation error S3: PutBucketAcl, https response error StatusCode: 400,
│ RequestID: NOP345QRS678, HostID: def123,
│ api error AccessControlListNotSupported: The bucket does not allow ACLs
│
│   with aws_s3_bucket_acl.public_read,
│   on storage/acl.tf line 8, in resource "aws_s3_bucket_acl" "public_read":
│    8: resource "aws_s3_bucket_acl" "public_read" {

---FIXTURE_SEPARATOR---

# ============================================================================
# Test Case 4: Bucket Versioning State Conflict
# ============================================================================

Terraform will perform the following actions:

  # aws_s3_bucket_versioning.enabled will be updated in-place

Plan: 0 to add, 1 to change, 0 to destroy.

aws_s3_bucket_versioning.enabled: Modifying...

│ Error: updating S3 Bucket Versioning (compliance-bucket-prod):
│ operation error S3: PutBucketVersioning, https response error StatusCode: 409,
│ RequestID: TUV901WXY234, HostID: ghi789,
│ api error InvalidBucketState: Versioning cannot be disabled on a bucket
│ with Object Lock enabled.
│
│   with aws_s3_bucket_versioning.enabled,
│   on storage/versioning.tf line 12, in resource "aws_s3_bucket_versioning" "enabled":
│   12: resource "aws_s3_bucket_versioning" "enabled" {

---FIXTURE_SEPARATOR---

# ============================================================================
# Test Case 5: Cross-Region Replication Configuration Error
# ============================================================================

Terraform will perform the following actions:

  # aws_s3_bucket_replication_configuration.dr will be created

Plan: 1 to add, 0 to change, 0 to destroy.

aws_s3_bucket_replication_configuration.dr: Creating...

│ Error: creating S3 Bucket Replication Configuration (source-bucket-us-east-1):
│ operation error S3: PutBucketReplication, https response error StatusCode: 400,
│ RequestID: ZAB567CDE890, HostID: jkl012,
│ api error InvalidRequest: Versioning must be enabled on the source bucket
│ to enable replication.
│
│   with aws_s3_bucket_replication_configuration.dr,
│   on storage/replication.tf line 1, in resource "aws_s3_bucket_replication_configuration" "dr":
│    1: resource "aws_s3_bucket_replication_configuration" "dr" {

---FIXTURE_SEPARATOR---

# ============================================================================
# Test Case 6: S3 Bucket Policy - Malformed Policy Document
# ============================================================================

Terraform will perform the following actions:

  # aws_s3_bucket_policy.public will be created

Plan: 1 to add, 0 to change, 0 to destroy.

aws_s3_bucket_policy.public: Creating...

│ Error: creating S3 Bucket Policy (website-assets-prod):
│ operation error S3: PutBucketPolicy, https response error StatusCode: 400,
│ RequestID: FGH123IJK456, HostID: mno345,
│ api error MalformedPolicy: Invalid principal in policy
│
│   with aws_s3_bucket_policy.public,
│   on storage/policy.tf line 22, in resource "aws_s3_bucket_policy" "public":
│   22: resource "aws_s3_bucket_policy" "public" {
