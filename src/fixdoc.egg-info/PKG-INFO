Metadata-Version: 2.4
Name: fixdoc
Version: 0.1.0
Summary: Capture and search infrastructure fixes for cloud engineers
Author: Fiyi
License: MIT
Keywords: devops,terraform,infrastructure,documentation,cli
Classifier: Development Status :: 3 - Alpha
Classifier: Environment :: Console
Classifier: Intended Audience :: Developers
Classifier: Intended Audience :: System Administrators
Classifier: License :: OSI Approved :: MIT License
Classifier: Operating System :: OS Independent
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.9
Classifier: Programming Language :: Python :: 3.10
Classifier: Programming Language :: Python :: 3.11
Classifier: Programming Language :: Python :: 3.12
Classifier: Topic :: System :: Systems Administration
Classifier: Topic :: Utilities
Requires-Python: >=3.9
Description-Content-Type: text/markdown
Requires-Dist: click>=8.0.0
Provides-Extra: dev
Requires-Dist: pytest>=7.0.0; extra == "dev"
Requires-Dist: pytest-cov>=4.0.0; extra == "dev"
Requires-Dist: black>=23.0.0; extra == "dev"
Requires-Dist: ruff>=0.1.0; extra == "dev"

# FixDoc

A CLI tool for cloud engineers to capture and search infrastructure fixes. Stop losing tribal knowledge in Slack threads and personal notes.

## The Problem

Infrastructure bugs show themselves in many forms:
- Azure portal errors (Key Vault RBAC issues, access policy problems)
- Terraform resource misconfigurations that cause downstream failures
- Kubernetes cluster issues (self-hosted agent permissions, secret/PAT problems)

When you fix these issues, the knowledge often disappears. FixDoc captures your fixes quickly and gives you:

1. **Reference** to your old bugs that you've fixed before
2. **Searchable documentation** through keywords
3. **Proactive warnings** during `terraform plan` about issues you've encountered before

## Installation

```bash
# Clone the repo
git clone <repo-url>
cd fixdoc

# Install in development mode
pip install -e .

# Or install with dev dependencies
pip install -e ".[dev]"
```

## Quick Start

### Capture a Fix

**Interactive mode** - guided prompts for all fields:
```bash
fixdoc capture
```

**Quick mode** - for when you're in a hurry:
```bash
fixdoc capture --quick "User couldn't access storage account | Added them to storage blob data contributor group" --tags azurerm_storage_account,rbac
```

### Search Your Fixes

```bash
fixdoc search "storage account"
fixdoc search rbac
fixdoc search "access denied"
```

### Analyze Terraform Plans

Before running `terraform apply`, check for known issues:

```bash
# Generate plan JSON
terraform plan -out=plan.tfplan
terraform show -json plan.tfplan > plan.json

# Analyze against your fix history
fixdoc analyze plan.json
```

Output:
```
Found 1 potential issue(s) based on your fix history:

⚠  azurerm_storage_account.main may relate to FIX-a1b2c3d4
   Previous issue: Users couldn't access blob storage
   Resolution: Added storage blob data contributor role
   Tags: azurerm_storage_account,rbac

Run `fixdoc show <fix-id>` for full details on any fix.
```

### Other Commands

```bash
# List all fixes
fixdoc list

# Show full details of a fix
fixdoc show a1b2c3d4

# Delete a fix
fixdoc delete a1b2c3d4

# View statistics
fixdoc stats
```

## Fix Fields

When capturing a fix, you'll be prompted for:

| Field | Required | Description |
|-------|----------|-------------|
| Issue | ✓ | What was the problem? |
| Resolution | ✓ | How did you fix it? |
| Error excerpt | | Relevant error message or logs |
| Tags | | Comma-separated keywords (resource types, categories) |
| Notes | | Gotchas, misleading directions, additional context |

**Tip**: Use resource types as tags (e.g., `azurerm_storage_account`, `azurerm_key_vault`) to enable terraform plan analysis.

## Storage

FixDoc stores everything locally:

```
~/.fixdoc/
├── fixes.json      # JSON database of all fixes
└── docs/           # Generated markdown files
    ├── <uuid>.md
    └── ...
```

Markdown files are generated alongside the JSON database, so you can:
- Push them to a wiki
- Commit them to a repo
- Share them with your team

## Philosophy

**Speed is everything.** Engineers won't document fixes if it takes too long. FixDoc is designed to capture information in seconds:

- Quick mode for one-liner captures
- Optional fields you can skip
- Tags for fast categorization

The goal is to build a searchable knowledge base over time, not to write perfect documentation for each fix.

## License

MIT
